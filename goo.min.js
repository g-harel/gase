var goo=function(a,b,c){function f(a,b,c,d){function e(a,e,g){var a=JSON.parse(JSON.stringify(a));void 0===g&&(g={});var h=[f];b.reverse().forEach(function(a,b){h[b+1]=function(c,d,e){return a(h[b],c,d,e)}});var i=JSON.parse(JSON.stringify(h[b.length](a,e,g)));return d.state_log===!0&&(console.log("state > %c%s","color:#a00;",JSON.stringify(a)),console.log("%c%s","font-size:20px;",e+" "+JSON.stringify(g)),console.log("state > %c%s","color:#0a0;",JSON.stringify(i))),c.forEach(function(a){a(JSON.parse(JSON.stringify(i)),e,g)}),i}function f(b,c,d){var e=JSON.parse(JSON.stringify(b));return a.forEach(function(a,b){var f=a[c];f&&f.forEach(function(a){var b=JSON.parse(JSON.stringify(e));a.target.forEach(function(a,c){b=void 0!==b[a]?b[a]:{}}),b=a.do(b,d);for(var c=a.target.length-1;c>=0;--c){var f={};f[a.target[c]]=b,b=f}e=Object.assign(e,b)})}),e}return void 0===a&&(a=[{}]),void 0===b&&(b=[]),void 0===c&&(c=[]),Array.isArray(a)||(a=[a]),a.forEach(function(a,b){Object.keys(a).forEach(function(c,d){"function"==typeof a[c]&&(a[c]={target:[],do:a[c]}),Array.isArray(a[c])||(a[c]=[a[c]]),a[c].forEach(function(a,d){if(void 0===a.target)a.target=[];else if("string"==typeof a.target)a.target=[a.target];else if(!Array.isArray(a.target))throw new Error(`Target of action ${d} of type ${c} in action types ${b} is not an array`);if("function"!=typeof a.do)throw new Error(`Property "do" of action ${d} of type ${c} in action types ${b} is not a function`);a.target.forEach(function(a,e){if("string"!=typeof a&&"number"!=typeof a)throw new Error(`Key at index ${e} of target of action ${d} of type ${c} in action types ${b} is not valid`)})})})}),Array.isArray(b)||(b=[b]),b.forEach(function(a,b){if("function"!=typeof a)throw new Error(`Middleware at index ${b} is not a function`)}),Array.isArray(c)||(c=[c]),c.forEach(function(a,b){if("function"!=typeof a)throw new Error(`Watcher at index ${b} is not a function`)}),{act:e}}function g(a,b,c,d,e){var g=e.history_length||20,h=[],i=JSON.parse(JSON.stringify(a)),j=[];void 0===c?c=[]:Array.isArray(c)||(c=[c]),e.disable_history!==!0&&c.unshift(function(a,b,c,d){return"UNDO"===c?(h.length>0&&(j.push(i),i=h.pop()),i):"REDO"===c?(j.length>0&&(h.push(i),i=j.pop()),i):(j=[],h.push(i),h.length>g&&h.shift(),i=a(b,c,d))});var k=f(b,c,d,e),l=k.act;return k.act=function(a,b){return i=l(i,a,b)},k}function h(a,b,c){function e(a){if(!a.tagName){if(void 0===a.text)throw new Error("invalid vdom output: tagName or text property missing");return a.DOM=document.createTextNode(a.text),a}var b=document.createElement(a.tagName);return a.attributes&&Object.keys(a.attributes).forEach(function(c){b[c]=a.attributes[c]}),a.style&&Object.keys(a.style).forEach(function(c){b.style[c]=a.style[c]}),a.children&&void 0!==a.tagName&&Object.keys(a.children).forEach(function(c){a.children[c]=e(a.children[c]),b.appendChild(a.children[c].DOM)}),a.DOM=b,a}function f(a){function c(a,b,d,f){if(void 0!==a||void 0!==b)if(void 0===a)d.children[f]=e(b),d.DOM.appendChild(d.children[f].DOM);else if(void 0===b)d.DOM.removeChild(a.DOM),d.children[f]=void 0;else{if(a.tagName!==b.tagName){var h=a.DOM;d.children[f]=e(b),d.DOM.replaceChild(d.children[f].DOM,h)}else if(3===a.DOM.nodeType)a.text!==b.text&&(a.DOM.nodeValue=b.text,a.text=b.text);else{var i=g(a.style,b.style),j=g(a.attributes,b.attributes);void 0!==i.length&&(a.DOM.style.cssText=null,Object.keys(b.style).forEach(function(c){a.style[c]=b.style[c],a.DOM.style[c]=b.style[c]})),void 0!==j.length&&j.forEach(function(c){a.attributes[c]=b.attributes[c],a.DOM[c]=b.attributes[c]})}var k=Object.keys(a.children||{}).concat(Object.keys(b.children||{})),l={};k.forEach(function(d){void 0===l[d]&&(l[d]=!0,c(a.children[d],b.children[d],a,d))})}}c(d,b(a),{})}function g(a,b,c){c=c||{};var d=Object.prototype.toString.call(a),e=Object.prototype.toString.call(b);if(d!==e)return!1;if("[object Function]"===d)return!1;if("[object Object]"===d||"[object Array]"===d){var f=Object.keys(a),h=Object.keys(b);if("[object Array]"===d){var i=h.length-f.length;if(i>0)for(let a=i;a>0;--a)f.push(h[h.length-a])}else{var j={};f.forEach(function(a){j[a]=!0}),h.forEach(function(a){j[a]||f.push(a)})}return f.reduce(function(d,e){if(void 0!==c[e])return d;var f=g(a[e],b[e],c);return f!==!0&&("boolean"==typeof d&&(d=[]),f===!1?d.push([e]):f.forEach(function(a){a.unshift(e),d.push(a)})),d},!0)}return a===b}var d={};if(!a instanceof Node)throw new Error("target is not a DOM node");if("function"!=typeof b)throw new Error("create attribute is not a function");return d=e(b(c)),a.innerHTML="",a.appendChild(d.DOM),{update:f}}void 0===a?a=[]:Array.isArray(a)||(a=[a]);var d=a.map(function(a){return h(a.target,a.builder,b.state).update});void 0===b.watchers?b.watchers=[]:Array.isArray(b.watchers)||(b.watchers=[b.watchers]),d=b.watchers.concat(d);var e=g(b.state,b.actions,b.middleware,d,c||{});return{act:e.act}};