<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="./goo.min.js"></script>
</head>
<body>
    <div class="wrapper"></div>
    <script>
        let app = goo(document.body.children[0]);

        app.use({base: '/C:/Users/Gabriel/Documents/dev/goo/index.html'});

        app.setState(['button1', 'button2', 'button3']);

        app.use({action: {
            type: 'INCREMENT',
            target: [],
            handler: (target, params) => {
                target[params] = 'button' + (1 + +target[params][6]);
                return target;
            }
        }})

        let button = {
            component: (name, index) => (
                ['button', {onclick: () => app.act('INCREMENT', index)}, [
                    name
                ]]
            )
        }

        app((state) => (
            ['div', {}, [
                ['div.buttons', {}, state.map((name, i) => (
                    [button.component, name, i]
                ))],
                ['div.history', {}, [
                    ['button', {onclick: () => app.undo()}, [
                        'UNDO'
                    ]],
                    ['button', {onclick: () => app.redo()}, [
                        'REDO'
                    ]],
                    ['button', {onclick: () => app.redirect('/test')}, [
                        'test'
                    ]]
                ]],
            ]]
        ));

        app('/test', () => 'test');
    </script>
</body>
</html>
