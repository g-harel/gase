!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";window.goo=function(t,e){function n(t,e,n,r){function o(t,o){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=[a];e.reverse().forEach(function(t,e){u[e+1]=function(n,r,o){return t(u[e],i(n),r,o)}});var s=i(u[e.length](t,o,c));return r.stateLog===!0&&(console.log("state > %c%s","color:#a00;",JSON.stringify(t)),console.log("%c%s","font-size:20px;",o+" "+JSON.stringify(c)),console.log("state > %c%s","color:#0a0;",JSON.stringify(s))),n.forEach(function(t){t(i(s),o,c)}),s}function a(e,n,r){return t.forEach(function(t){var o=t[n];o&&o.forEach(function(t){var o=i(e);if(t.target.length>0){var a=e;t.target.forEach(function(e,i,u){void 0!==o[e]?i===u.length-1?a[e]=t.do(o[e],r):(o=o[e],a=a[e]):c("target address of action "+n+" is invalid: @state."+t.target.join("."))})}else e=t.do(o,r)})}),e}return{act:o}}function r(t,e){function n(t,n,r,i){return"UNDO"===r?o.length>0?(c.push(a),o.pop()):a:"REDO"===r?c.length>0?(o.push(a),c.pop()):a:(c=[],o.push(a),o.length>e.historyLength&&o.shift(),t(n,r,i))}function r(t,e,n){return a=t(a,e,n)}var o=[],a=i(t),c=[];return{updateCurrent:r,history:n}}function o(t,e,n){function r(t){if(!t.tagName)return void 0===t.text&&c("invalid vdom output: tagName or text property missing"),t.DOM=document.createTextNode(t.text),t;var e=document.createElement(t.tagName);return t.attributes&&Object.keys(t.attributes).forEach(function(n){e[n]=o(t.attributes[n])}),t.style&&Object.keys(t.style).forEach(function(n){e.style[n]=t.style[n]}),t.children&&void 0!==t.tagName&&Object.keys(t.children).forEach(function(n){t.children[n]=r(t.children[n]),e.appendChild(t.children[n].DOM)}),t.DOM=e,t}function o(t){var e=String(t).match(/^\(\s*([^\n]+)\s*,\s*(?:(\{[^]*\})|([^\s]+))\s*\)$/);if(null===e)return t;var n=e[1],r=null;try{r=JSON.parse(e[2])}catch(t){r=e[3]||e[2]}return function(){f.act(n,r)}}function i(t){function n(t,e,i,c){if(void 0!==t||void 0!==e)if(void 0===t)i.children[c]=r(e),i.DOM.appendChild(i.children[c].DOM);else if(void 0===e)i.DOM.removeChild(t.DOM),i.children[c]=void 0;else{if(t.tagName!==e.tagName){var u=t.DOM;i.children[c]=r(e),i.DOM.replaceChild(i.children[c].DOM,u)}else if(3===t.DOM.nodeType)t.text!==e.text&&(t.DOM.nodeValue=e.text,t.text=e.text);else{var s=a(t.style,e.style),f=a(t.attributes,e.attributes);void 0!==s.length&&(t.DOM.style.cssText=null,Object.keys(e.style).forEach(function(n){t.style[n]=e.style[n],t.DOM.style[n]=e.style[n]})),void 0!==f.length&&f.forEach(function(n){t.attributes[n]=e.attributes[n],t.DOM[n]=o(e.attributes[n])})}var l=Object.keys(t.children||{}).concat(Object.keys(e.children||{})),d={};l.forEach(function(r){void 0===d[r]&&(d[r]=!0,n(t.children[r],e.children[r],t,r))})}}window.requestAnimationFrame(function(){return n(u,e(t),{})})}function a(t,e){var n=Object.prototype.toString.call(t),r=Object.prototype.toString.call(e);if(n!==r)return!1;if("[object Function]"===n)return!1;if("[object Object]"===n||"[object Array]"===n){var o=Object.keys(t),i=Object.keys(e);if("[object Array]"===n){var c=i.length-o.length;if(c>0)for(var u=c;u>0;--u)o.push(i[i.length-u])}else{var s={};o.forEach(function(t){s[t]=!0}),i.forEach(function(t){s[t]||o.push(t)})}return o.reduce(function(n,r){var o=a(t[r],e[r]);return o!==!0&&("boolean"==typeof n&&(n=[]),o===!1?n.push([r]):o.forEach(function(t){t.unshift(r),n.push(t)})),n},!0)}return t===e}var u={};return u=r(e(n)),window.requestAnimationFrame(function(){t.innerHTML="",t.appendChild(u.DOM)}),{update:i}}function i(t){return JSON.parse(JSON.stringify(t))}function a(){void 0===t?c("controllers argument is empty"):Array.isArray(t)||(t=[t]),t.forEach(function(t){!t.target instanceof Node&&c("target is not a DOM node"),"function"!=typeof t.builder&&c("builder attribute is not a function")}),void 0===e.watchers?e.watchers=[]:Array.isArray(e.watchers)||(e.watchers=[e.watchers]),e.watchers.reduce(function(t,e){return t&&"function"==typeof e},!0)||c("one or more watchers is not a function"),void 0===e.middleware?e.middleware=[]:Array.isArray(e.middleware)||(e.middleware=[e.middleware]),e.middleware.reduce(function(t,e){return t&&"function"==typeof e},!0)||c("one or more middleware is not a function"),void 0===e.actions?e.actions=[]:Array.isArray(e.actions)||(e.actions=[e.actions]),e.actions.forEach(function(t,e){Object.keys(t).forEach(function(n,r){"function"==typeof t[n]&&(t[n]={target:[],do:t[n]}),Array.isArray(t[n])||(t[n]=[t[n]]),t[n].forEach(function(t,r){void 0===t.target?t.target=[]:"string"==typeof t.target?t.target=[t.target]:Array.isArray(t.target)||c("Target of action "+r+" of type "+n+" in action types "+e+" is not an array"),"function"!=typeof t.do&&c('Property "do" of action '+r+" of type "+n+" in action types "+e+" is not a function"),t.target.forEach(function(t,o){"string"!=typeof t&&"number"!=typeof t&&c("Key at index "+o+" of target of action "+r+" of type "+n+" in action types "+e+" is not valid")})})})}),u.historyLength=u.historyLength||20}function c(t){throw new Error("** "+t)}var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a(),t.forEach(function(t){e.watchers.unshift(o(t.target,t.builder,e.state).update)});var s=r(e.state,u);u.disableHistory||e.middleware.push(s.history);var f=n(e.actions,e.middleware,e.watchers,u),l=f.act;return f.act=function(t,e){s.updateCurrent(l,t,e)},{act:f.act}}}]);