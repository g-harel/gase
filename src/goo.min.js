!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";window.goo=function(t,e,r){function n(t,e,r,n){function o(t,o,c){void 0===c&&(c={});var u=[i];e.reverse().forEach(function(t,e){u[e+1]=function(r,n,o){var i=t(u[e],a(r),n,o);return i}});var s=a(u[e.length](t,o,c));return n.stateLog===!0&&(console.log("state > %c%s","color:#a00;",JSON.stringify(t)),console.log("%c%s","font-size:20px;",o+" "+JSON.stringify(c)),console.log("state > %c%s","color:#0a0;",JSON.stringify(s))),r.forEach(function(t){t(a(s),o,c)}),s}function i(e,r,n){return t.forEach(function(t,o){var i=t[r];i&&i.forEach(function(t){var r=a(e);if(t.target.length>0){var o=e;t.target.forEach(function(e,i,a){void 0!==r[e]?i===a.length-1?o[e]=t.do(r[e],n):(r=r[e],o=o[e]):(r={},o={})})}else e=t.do(r,n)})}),e}return{act:o}}function o(t,e){function r(t,r,n,a){return"UNDO"===n?o.length>0?(c.push(i),o.pop()):i:"REDO"===n?c.length>0?(o.push(i),c.pop()):i:(c=[],o.push(i),o.length>e.historyLength&&o.shift(),t(r,n,a))}function n(t,e,r){return i=t(i,e,r)}var o=[],i=a(t),c=[];return{updateCurrent:n,history:r}}function i(t,e,r){function n(t){if(!t.tagName)return void 0===t.text&&u("invalid vdom output: tagName or text property missing"),t.DOM=document.createTextNode(t.text),t;var e=document.createElement(t.tagName);return t.attributes&&Object.keys(t.attributes).forEach(function(r){e[r]=o(t.attributes[r])}),t.style&&Object.keys(t.style).forEach(function(r){e.style[r]=t.style[r]}),t.children&&void 0!==t.tagName&&Object.keys(t.children).forEach(function(r){t.children[r]=n(t.children[r]),e.appendChild(t.children[r].DOM)}),t.DOM=e,t}function o(t){var e=String(t).match(/^\(\s*([^\n]+)\s*,\s*(?:(\{[^]*\})|([^\s]+))\s*\)$/);if(null===e)return t;var r=e[1],n=null;try{n=JSON.parse(e[2])}catch(t){n=e[3]||e[2]}return function(){f.act(r,n)}}function i(t){function r(t,e,i,c){if(void 0!==t||void 0!==e)if(void 0===t)i.children[c]=n(e),i.DOM.appendChild(i.children[c].DOM);else if(void 0===e)i.DOM.removeChild(t.DOM),i.children[c]=void 0;else{if(t.tagName!==e.tagName){var u=t.DOM;i.children[c]=n(e),i.DOM.replaceChild(i.children[c].DOM,u)}else if(3===t.DOM.nodeType)t.text!==e.text&&(t.DOM.nodeValue=e.text,t.text=e.text);else{var s=a(t.style,e.style),f=a(t.attributes,e.attributes);void 0!==s.length&&(t.DOM.style.cssText=null,Object.keys(e.style).forEach(function(r){t.style[r]=e.style[r],t.DOM.style[r]=e.style[r]})),void 0!==f.length&&f.forEach(function(r){t.attributes[r]=e.attributes[r],t.DOM[r]=o(e.attributes[r])})}var l=Object.keys(t.children||{}).concat(Object.keys(e.children||{})),d={};l.forEach(function(n){void 0===d[n]&&(d[n]=!0,r(t.children[n],e.children[n],t,n))})}}window.requestAnimationFrame(function(){return r(c,e(t),{})})}function a(t,e){var r=Object.prototype.toString.call(t),n=Object.prototype.toString.call(e);if(r!==n)return!1;if("[object Function]"===r)return!1;if("[object Object]"===r||"[object Array]"===r){var o=Object.keys(t),i=Object.keys(e);if("[object Array]"===r){var c=i.length-o.length;if(c>0)for(var u=c;u>0;--u)o.push(i[i.length-u])}else{var s={};o.forEach(function(t){s[t]=!0}),i.forEach(function(t){s[t]||o.push(t)})}return o.reduce(function(r,n){var o=a(t[n],e[n]);return o!==!0&&("boolean"==typeof r&&(r=[]),o===!1?r.push([n]):o.forEach(function(t){t.unshift(n),r.push(t)})),r},!0)}return t===e}var c={};return c=n(e(r)),t.innerHTML="",t.appendChild(c.DOM),{update:i}}function a(t){return JSON.parse(JSON.stringify(t))}function c(){void 0===t?u("controllers argument is empty"):Array.isArray(t)||(t=[t]),t.forEach(function(t){!t.target instanceof Node&&u("target is not a DOM node"),"function"!=typeof t.builder&&u("builder attribute is not a function")}),void 0===e.watchers?e.watchers=[]:Array.isArray(e.watchers)||(e.watchers=[e.watchers]),e.watchers.reduce(function(t,e){return t&&"function"==typeof e},!0)||u("one or more watchers is not a function"),void 0===e.middleware?e.middleware=[]:Array.isArray(e.middleware)||(e.middleware=[e.middleware]),e.middleware.reduce(function(t,e){return t&&"function"==typeof e},!0)||u("one or more middleware is not a function"),void 0===e.actions?e.actions=[]:Array.isArray(e.actions)||(e.actions=[e.actions]),e.actions.forEach(function(t,e){Object.keys(t).forEach(function(r,n){"function"==typeof t[r]&&(t[r]={target:[],do:t[r]}),Array.isArray(t[r])||(t[r]=[t[r]]),t[r].forEach(function(t,n){void 0===t.target?t.target=[]:"string"==typeof t.target?t.target=[t.target]:Array.isArray(t.target)||u("Target of action "+n+" of type "+r+" in action types "+e+" is not an array"),"function"!=typeof t.do&&u('Property "do" of action '+n+" of type "+r+" in action types "+e+" is not a function"),t.target.forEach(function(t,o){"string"!=typeof t&&"number"!=typeof t&&u("Key at index "+o+" of target of action "+n+" of type "+r+" in action types "+e+" is not valid")})})})}),r=r||{},r.historyLength=r.historyLength||20}function u(t){throw new Error("** "+t)}c(),t.forEach(function(t){e.watchers.unshift(i(t.target,t.builder,e.state).update)});var s=o(e.state,r);r.disableHistory||e.middleware.push(s.history);var f=n(e.actions,e.middleware,e.watchers,r),l=f.act;return f.act=function(t,e){s.updateCurrent(l,t,e)},{act:f.act}}}]);