!function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e={};t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=1)}([function(n,t,e){"use strict";var r=function(){var n=function(n){return void 0!==n},t=function(n){return null===n},e=function(n){return Array.isArray(n)},r=function(n){return"function"==typeof n},i=function(n){return"string"==typeof n},o=function(n){return"number"==typeof n},u=function(n){return"boolean"==typeof n},a=function(n){return!!n&&n.constructor===Object},s=function(n){return!!(n&&n.tagName&&n.nodeName&&n.ownerDocument&&n.removeAttribute)},c=function(n){return n instanceof RegExp},d=function(){return"undefined"!=typeof window},f=function(t){if(n(t))return JSON.parse(JSON.stringify(t))},l=function(n,t){for(var e=arguments.length,r=Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var o=function(n){return"\n>>> "+String(JSON.stringify(n,function(n,t){return"function"==typeof t?t.toString():t},2)).replace(/\n/g,"\n    ")};if(!n)throw new Error("@okwolo."+t+r.map(o).join(""))};return{deepCopy:f,assert:l,isDefined:n,isNull:t,isArray:e,isFunction:r,isString:i,isNumber:o,isBoolean:u,isObject:a,isNode:s,isRegExp:c,isBrowser:d,makeQueue:function(){var t=[],e=function(){var e=t[0];n(e)&&e()};return{add:function(n){l(r(n),"utils.makeQueue.add : added objects must be a function",n),t.push(n),1===t.length&&e()},done:function(){t.shift(),e()}}},makeBus:function(){var t={},e={},o=function(e,o){l(i(e),"utils.bus : handler type is not a string",e),l(r(o),"utils.bus : handler is not a function",o),n(t[e])||(t[e]=[]),t[e].push(o)},u=function(r){l(a(r),"utils.bus : event is not an object",r);var o=r.name;if(n(o)){if(l(i(o),"utils.bus : event name is not a string",o),n(e[o]))return;e[o]=!0}Object.keys(r).forEach(function(e){n(t[e])&&t[e].forEach(function(n){return n(r[e])})})};return Object.assign(u,{on:o})}}};n.exports=r},function(n,t,e){"use strict";function r(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}var i=e(2),o=e(0)(),u=o.assert,a=o.isDefined,s=o.isFunction,c={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},d=function(n,t){u(s(n),"server.dom.draw : target is not a function",n);n(function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:""};if(a(t.text))return[t.text];var e=t.tagName,i=t.attributes,o=void 0===i?{}:i,u=t.children,s=void 0===u?[]:u,d=Object.keys(o).map(function(n){return"className"===n&&(n="class",o.class=o.className),n+'="'+o[n].toString()+'"'}).join(" ");if(e=e.toLowerCase(),a(c[e])&&s.length<1)return["<"+(e+" "+d).trim()+" />"];var f=s.reduce(function(t,e){return t.concat(n(e))},[]).map(function(n){return"  "+n});return["<"+(e+" "+d).trim()+">"].concat(r(f),["</"+e+">"])}(t).join("\n"))},f=function(n){var t=n.use,e=n.emit;t({name:"okwolo-server-render",draw:d,update:d,api:{setState:function(n){return e({state:n})}}})};n.exports=i({modules:[e(3),e(4),f],options:{kit:"server",browser:!1}})},function(n,t,e){"use strict";var r=e(0)(),i=r.isFunction,o=r.isDefined,u=r.isObject,a=r.assert,s=r.isBrowser,c=r.makeBus,d=function(n){var t=n.modules,e=n.options,r=function(n,r){e.browser&&(o(r)||(a(s(),"app : must be run in a browser environment"),r=window));var d=c(),f=c(),l=function(){},m=function(){return l.apply(void 0,arguments)};return m.emit=d,m.use=f,f.on("api",function(n){a(u(n),"core.use.api : additional api is not an object",n),Object.assign(m,n)}),f.on("primary",function(n){a(i(n),"core.use.primary : primary is not a function",n),l=n}),t.forEach(function(n){n(m,r)}),o(n)&&f({target:n}),m};return s()&&(r.kit=e.kit,r.version="1.3.0",o(window.okwolo)||(window.okwolo=r),window.okwolo[e.kit]=r),r};n.exports=d},function(n,t,e){"use strict";var r=e(0)(),i=r.assert,o=r.isDefined,u=r.isFunction,a=function(n){var t=n.emit,e=n.use,r=void 0,a=void 0,s=void 0,c=void 0,d=void 0,f=void 0,l=void 0,m=void 0,p=void 0,v=function(n){var t=a(n);return c&&(t=c(t)),t=s(t),d&&(t=d(t)),t},b=!1,y=!1,g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!b;if(!y){if(!(o(r)&&o(a)&&o(p)&&o(s)))return;y=!0}if(!n)return void(m=l(r,v(p),m));m=f(r,v(p)),b=!0};t.on("state",function(n){i(o(n),"dom.emit.state : new state is not defined",n),p=n,g()}),e.on("target",function(n){r=n,g(!0)}),e.on("builder",function(n){i(u(n),"dom.use.builder : builder is not a function",n),a=n,g()}),e.on("draw",function(n){i(u(n),"dom.use.draw : new draw is not a function",n),f=n,g(!0)}),e.on("update",function(n){i(u(n),"dom.use.update : new target updater is not a function",n),l=n,g()}),e.on("build",function(n){i(u(n),"dom.use.build : new build is not a function",n),s=n,g()}),e.on("prebuild",function(n){i(u(n),"dom.use.prebuild : new prebuild is not a function",n),c=n,g()}),e.on("postbuild",function(n){i(u(n),"dom.use.postbuild : new postbuild is not a function",n),d=n,g()}),e({api:{update:function(){g()}}}),e({primary:function(n){e({builder:n()})}})};n.exports=a},function(n,t,e){"use strict";function r(n){if(Array.isArray(n)){for(var t=0,e=Array(n.length);t<n.length;t++)e[t]=n[t];return e}return Array.from(n)}var i=function(){function n(n,t){var e=[],r=!0,i=!1,o=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!t||e.length!==t);r=!0);}catch(n){i=!0,o=n}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e(0)(),u=o.assert,a=o.isDefined,s=o.isNull,c=o.isArray,d=o.isString,f=o.isNumber,l=o.isBoolean,m=o.isNode,p=o.isObject,v=o.isFunction,b=function n(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.map(function(t){return d(t)?t:c(t)?n.apply(void 0,r(t)):p(t)?n(Object.keys(t).map(function(n){return t[n]&&n})):void 0}).filter(Boolean).join(" ")},y=function(n,t){return Object.keys(Object.assign({},n,t)).filter(function(e){var r=n[e],i=t[e];return!(!v(r)&&!v(i))||r!==i})},g=function n(t){if(l(t)&&(t=null),s(t))return{text:""};if(f(t)&&(t=String(t)),d(t))return{text:t};if(u(c(t),"dom.build : vdom object is not a recognized type",t),v(t[0])){var e=t,r=i(e,3),o=r[0],m=r[1],y=void 0===m?{}:m,g=r[2],h=void 0===g?[]:g;return u(p(y),"dom.build : component's props is not an object",t,y),u(c(h),"dom.build : component's children is not an array",t,h),n(o(Object.assign({},y,{children:h})))}var w=t,O=i(w,3),j=O[0],x=O[1],D=void 0===x?{}:x,N=O[2],k=void 0===N?[]:N;u(d(j),"dom.build : tag property is not a string",t,j),u(p(D),"dom.build : attributes is not an object",t,D),u(c(k),"dom.build : children of vdom object is not an array",t,k);var M=/^ *(\w+) *(?:#([-\w\d]+))? *((?:\.[-\w\d]+)*)? *(?:\|\s*([^\s]{1}[^]*?))? *$/.exec(j);u(c(M),"dom.build : tag property cannot be parsed",j);var A=i(M,5),S=A[1],E=A[2],B=A[3],C=A[4];return a(E)&&!a(D.id)&&(D.id=E.trim()),(a(D.className)||a(B))&&(D.className=b(D.className,B).replace(/\./g," ").replace(/  +/g," ").trim()),a(C)&&(a(D.style)?(C=(C+";").replace(/;;$/g,";"),D.style+=C+D.style):D.style=C),{tagName:S,attributes:D,children:k.map(n)}};n.exports=function(n,t){var e=n.use,r=function n(e){if(a(e.text))return e.DOM=t.document.createTextNode(e.text),e;var r=t.document.createElement(e.tagName);return Object.assign(r,e.attributes),Object.keys(e.children).forEach(function(t){var i=n(e.children[t]),o=i.DOM;r.appendChild(o)}),e.DOM=r,e};e({name:"@okwolo/dom",draw:function(n,e){return u(m(n),"dom.draw : target is not a DOM node",n),r(e),t.requestAnimationFrame(function(){n.innerHTML="",n.appendChild(e.DOM)}),e},update:function(n,e,i){u(m(n),"dom.update : target is not a DOM node",n);var o=function n(t,e,i,o){if(a(t)||a(e)){if(!a(t))return i.children[o]=r(e),void i.DOM.appendChild(i.children[o].DOM);if(!a(e))return i.DOM.removeChild(t.DOM),void delete i.children[o];if(t.tagName!==e.tagName){var u=t.DOM,s=r(e);return i.DOM.replaceChild(s.DOM,u),void Object.assign(t,{DOM:void 0,text:void 0,tagName:void 0,attributes:void 0,children:void 0},s)}if(3===t.DOM.nodeType)return void(t.text!==e.text&&(t.DOM.nodeValue=e.text,t.text=e.text));y(t.attributes,e.attributes).forEach(function(n){t.attributes[n]=e.attributes[n],t.DOM[n]=e.attributes[n]});for(var c=Math.max(t.children.length,e.children.length),d=0;d<c;++d)n(t.children[d],e.children[d],t,d)}};return t.requestAnimationFrame(function(){o(i,e,{DOM:n,children:[i]},0)}),i},build:g})}}]);