!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=1)}([function(t,n,e){"use strict";var r=function(){var t=function(t){return void 0!==t},n=function(t){return null===t},e=function(t){return Array.isArray(t)},r=function(t){return"function"==typeof t},i=function(t){return"string"==typeof t},o=function(t){return"number"==typeof t},a=function(t){return"boolean"==typeof t},u=function(t){return!!t&&t.constructor===Object},c=function(t){return!!(t&&t.tagName&&t.nodeName&&t.ownerDocument&&t.removeAttribute)},s=function(){if("undefined"!=typeof window)return!0},d=function(n){if(t(n))return JSON.parse(JSON.stringify(n))},f=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];var o=function(t){return"\n>>> "+String(JSON.stringify(t,function(t,n){return"function"==typeof n?n.toString():n},2)).replace(/\n/g,"\n    ")};if(!t)throw r.length>0&&(n+=r.map(o).join("")),new Error("@okwolo."+n)};return{deepCopy:d,assert:f,isDefined:t,isNull:n,isArray:e,isFunction:r,isString:i,isNumber:o,isBoolean:a,isObject:u,isNode:c,isBrowser:s,makeQueue:function(){var n=[],e=function(){var e=n[0];t(e)&&e()};return{add:function(t){f(r(t),"utils.makeQueue.add : added objects must be a function",t),n.push(t),1===n.length&&e()},done:function(){n.shift(),e()}}},bus:function(n){var e={},o={},a=function(n,o){f(i(n),"utils.bus : handler type is not a string",n),f(r(o),"utils.bus : handler is not a function",o),t(e[n])||(e[n]=[]),e[n].push(o)},c=function(r){f(u(r),"utils.bus : event is not an object",r);var a=r.name;if(t(a)){if(f(i(a),"utils.bus : event name is not a string",a),t(o[a]))return;o[a]=!0}Object.keys(r).forEach(function(i){if(t(e[i]))return n?void n.add(function(){e[i].forEach(function(t){return t(r[i])}),n.done()}):void e[i].forEach(function(t){return t(r[i])})})};return Object.assign(c,{on:a})}}};t.exports=r},function(t,n,e){"use strict";var r=e(2);t.exports=r({modules:[e(3),e(4)],blobs:[e(5),e(6)],options:{kit:"routerless",browser:!0,modules:{state:!0,history:!0,dom:!0,router:!1}}})},function(t,n,e){"use strict";var r=e(0)(),i=r.isFunction,o=r.isDefined,a=r.assert,u=r.deepCopy,c=r.isBrowser,s=r.bus,d=function(t){var n=t.modules,e=t.blobs,r=t.options,d=function(t,d){r.browser&&(o(d)||(a(c(),"app : must be run in a browser environment"),d=window));var f=s(),l=s(),h={emit:f,use:l};n.forEach(function(t){t({emit:f,use:l},d)}),e.forEach(function(t){l(t(d))});var p={},v=p;return f.on("state",function(t){v=t}),h.getState=function(){return a(v!==p,"getState : cannot get state before it has been set"),u(v)},r.modules.dom&&(h.update=function(){f({state:v})},o(t)&&l({target:t})),r.modules.state?(h.act=function(t,n){a("SET_STATE"===t||v!==p,"act : cannot act on state before it has been set"),f({act:{state:v,type:t,params:n}})},l({action:{type:"SET_STATE",target:[],handler:function(t,n){return n}}}),h.setState=function(t){if(i(t))return void h.act("SET_STATE",t(u(v)));h.act("SET_STATE",t)},r.modules.history&&(h.undo=function(){h.act("UNDO")},h.redo=function(){h.act("REDO")})):(a(!r.modules.history,"app : cannot use history blob without the state module",r),h.setState=function(t){if(i(t))return void f({state:t(u(v))});f({state:t})}),r.modules.router?(h.redirect=function(t,n){f({redirect:{path:t,params:n}})},h.show=function(t,n){f({show:{path:t,params:n}})},h.register=function(t,n){if(i(t))return void l({builder:t()});l({route:{path:t,callback:function(t){l({builder:n(t)})}}})}):h.register=function(t){l({builder:t()})},Object.assign(h.register,h)};return c()&&(d.kit=r.kit,d.version="1.3.0",o(window.okwolo)||(window.okwolo=d),window.okwolo[r.kit]=d),d};t.exports=d},function(t,n,e){"use strict";var r=e(0)(),i=r.assert,o=r.isDefined,a=r.isFunction,u=function(t,n){var e=t.emit,r=t.use,u=void 0,c=void 0,s=void 0,d=void 0,f=void 0,l=void 0,h=void 0,p=void 0,v=void 0,m=function(t){var n=p(t);return d&&(n=d(n)),n=s(n),f&&(n=f(n)),n},b=!1,g=!1,y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!b;if(!g){if(!(o(h)&&o(p)&&o(v)))return;g=!0}if(!t)return void(l=c(h,m(v),l));l=u(h,m(v)),b=!0};e.on("state",function(t){i(o(t),"dom.updateState : new state is not defined",t),v=t,y()}),r.on("target",function(t){h=t,y(!0)}),r.on("builder",function(t){i(a(t),"dom.replaceBuilder : builder is not a function",t),p=t,y()}),r.on("draw",function(t){i(a(t),"dom.replaceDraw : new draw is not a function",t),u=t,y(!0)}),r.on("update",function(t){i(a(t),"dom.replaceUpdate : new target updater is not a function",t),c=t,y()}),r.on("build",function(t){i(a(t),"dom.replaceBuild : new build is not a function",t),s=t,y()}),r.on("prebuild",function(t){i(a(t),"dom.replacePrebuild : new prebuild is not a function",t),d=t,y()}),r.on("postbuild",function(t){i(a(t),"dom.replacePostbuild : new postbuild is not a function",t),f=t,y()})};t.exports=u},function(t,n,e){"use strict";var r=e(0)(),i=r.assert,o=r.deepCopy,a=r.makeQueue,u=r.isDefined,c=r.isArray,s=r.isFunction,d=r.isString,f=function(t){var n=t.emit,e=t.use,r={},f=[],l=[],h=a(),p=function(t,e,a){var f=o(t);i(u(r[e]),"state.execute : action type '"+e+"' was not found"),r[e].forEach(function(n){var r=n.target;s(r)&&(r=r(o(t),a),i(c(r),"state.execute : dynamic target of action "+e+" is not an array",r),r.forEach(function(t){i(d(t),"state.execute : dynamic target of action "+e+" is not an array of strings",r)}));var l=o(f);if(r.length>0){var h=f;r.forEach(function(t,o){if(i(u(l[t]),"state.execute : target of action "+e+" does not exist: @state."+r.slice(0,o+1).join(".")),o===r.length-1){var c=n.handler(l[t],a);i(u(c),"state.execute : result of action "+e+" on target @state"+r.join(".")+" is undefined"),h[t]=c}else l=l[t],h=h[t]})}else f=n.handler(l,a),i(u(f),"state.execute : result of action "+e+" on target @state is undefined")}),n({state:o(f)}),l.forEach(function(t){t(o(f),e,a)}),h.done()},v=function(t,n,e){var r=[function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;p(r,i,o)}];f.reverse().forEach(function(i,a){r[a+1]=function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t=u,n=c,e=s,i(r[a],o(u),c,s)}}),r[f.length](o(t),n,e)};n.on("act",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.state,e=t.type,r=t.params,o=void 0===r?{}:r;i(d(e),"state.act : action type is not a string",e),i(u(n),"state.act : cannot call action "+e+" on an undefined state",n),h.add(function(){v(n,e,o)})}),e.on("action",function(t){[].concat(t).forEach(function(t){var n=t.type,e=t.handler,o=t.target;i(d(n),"state.use.action : action's type is not a string",t,n),i(s(e),"state.use.action : handler for action "+n+" is not a function",t,e),c(o)?o.forEach(function(e){i(d(e),"state.use.action : target of action "+n+" is not an array of strings",t,o)}):i(s(o),"state.use.action : target of action "+n+" is not valid",o),void 0===r[n]?r[n]=[t]:r[n].push(t)})}),e.on("middleware",function(t){[].concat(t).forEach(function(t){i(s(t),"state.use.middleware : middleware is not a function",t),f.push(t)})}),e.on("watcher",function(t){[].concat(t).forEach(function(t){i(s(t),"state.use.watcher : watcher is not a function",t),l.push(t)})})};t.exports=f},function(t,n,e){"use strict";function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var i=function(){function t(t,n){var e=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e(0)(),a=o.assert,u=o.isDefined,c=o.isNull,s=o.isArray,d=o.isString,f=o.isNumber,l=o.isBoolean,h=o.isNode,p=o.isObject,v=o.isFunction,m=o.makeQueue,b=function(t){var n=function n(e){if(u(e.text))return e.DOM=t.document.createTextNode(e.text),e;var r=t.document.createElement(e.tagName);return Object.keys(e.attributes).forEach(function(t){r[t]=e.attributes[t]}),Object.keys(e.children).forEach(function(t){e.children[t]=n(e.children[t]),r.appendChild(e.children[t].DOM)}),e.DOM=r,e},e=function(t,n){return Object.keys(Object.assign({},t,n)).filter(function(e){var r=t[e],i=n[e];return!(r!==Object(r)&&i!==Object(i)&&r===i)})},o=function t(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];return e.map(function(n){return d(n)?n:s(n)?t.apply(void 0,r(n)):p(n)?t(Object.keys(n).map(function(t){return n[t]&&t})):void 0}).filter(Boolean).join(" ")};return{name:"@okwolo/dom",draw:function(e,r){return a(h(e),"dom.draw : target is not a DOM node",e),u(r)||(r={text:""}),r=n(r),t.requestAnimationFrame(function(){e.innerHTML="",e.appendChild(r.DOM)}),r},update:function(r,i,o){a(h(r),"dom.update : target is not a DOM node",r);var c=m();t.requestAnimationFrame(function(){c.add(function(){s(o,i,{DOM:r,children:[o]},0),c.done()})});var s=function t(r,i,o,a){if(u(r)||u(i)){if(!u(r))return o.children[a]=n(i),void o.DOM.appendChild(o.children[a].DOM);if(!u(i))return o.DOM.removeChild(r.DOM),void c.add(function(){delete o.children[a],c.done()});if(r.tagName!==i.tagName){var s=r.DOM,d=n(i);return o.DOM.replaceChild(d.DOM,s),void(u(d.text)?(o.children[a].DOM=d.DOM,o.children[a].text=d.text,delete o.children[a].tagName,delete o.children[a].attributes,delete o.children[a].children):(o.children[a].DOM=d.DOM,delete o.children[a].text,o.children[a].tagName=d.tagName,o.children[a].attributes=d.attributes,o.children[a].children=d.children))}if(3===r.DOM.nodeType)r.text!==i.text&&(r.DOM.nodeValue=i.text,r.text=i.text);else{var f=e(r.attributes,i.attributes);0!==f.length&&f.forEach(function(t){r.attributes[t]=i.attributes[t],r.DOM[t]=i.attributes[t]})}var l=Object.keys(r.children||{}).concat(Object.keys(i.children||{})),h={};l.forEach(function(n){void 0===h[n]&&(h[n]=!0,t(r.children[n],i.children[n],r,n))})}};return o},build:function t(n){if(l(n)&&(n=null),c(n))return{text:""};if(f(n)&&(n=String(n)),d(n))return{text:n};if(a(s(n),"dom.build : vdom object is not a recognized type",n),v(n[0])){var e=n[1]||{};a(p(e),"dom.build : component's props is not an object",n,e);var r=n[2]||[];return a(s(r),"dom.build : component's children is not an array",n,r),t(n[0](Object.assign({},e,{children:r})))}var h=n,m=i(h,3),b=m[0],g=m[1],y=m[2];a(d(b),"dom.build : tag property is not a string",n,b);var w=/^ *(\w+) *(?:#([-\w\d]+))? *((?:\.[-\w\d]+)*)? *(?:\|\s*([^\s]{1}[^]*?))? *$/.exec(b);a(s(w),"dom.build : tag property cannot be parsed",b);var O=i(w,5),x=O[1],E=O[2],D=O[3],j=O[4];return null==g&&(g={}),a(p(g),"dom.build : attributes is not an object",n,g),u(E)&&!u(g.id)&&(g.id=E.trim()),(u(g.className)||u(D))&&(g.className=o(g.className,D).replace(/\./g," ").replace(/  +/g," ").trim()),u(j)&&(u(g.style)?(g.style+=";"+j,g.style=g.style.replace(/;;/g,";")):g.style=j),u(y)?a(s(y),"dom.build : children of vdom object is not an array",n,y):y=[],{tagName:x,attributes:g,children:y.map(t)}}}};t.exports=b},function(t,n,e){"use strict";var r=e(0)(),i=r.deepCopy,o=function(){var t={},n=[],e=t,r=[];return{action:[{type:"UNDO",target:[],handler:function(){return n.length>0&&n[n.length-1]!==t?(r.push(e),n.pop()):e}},{type:"REDO",target:[],handler:function(){return r.length>0?(n.push(e),r.pop()):e}},{type:"__RESET__",target:[],handler:function(){return n=[],r=[],e}}],watcher:function(t,o){"__RESET__"!==o&&"*"!==o[0]&&("UNDO"!==o&&"REDO"!==o&&(r=[],n.push(e),n.length>21&&n.shift()),e=i(t))}}};t.exports=o}]);