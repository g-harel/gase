!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";var r=function(){var t=function(t){return void 0!==t},e=function(t){return null===t},n=function(t){return Array.isArray(t)},r=function(t){return"function"==typeof t},o=function(t){return"string"==typeof t},i=function(t){return"number"==typeof t},u=function(t){return"boolean"==typeof t},a=function(t){return!!t&&t.constructor===Object},c=function(t){return!!(t&&t.tagName&&t.nodeName&&t.ownerDocument&&t.removeAttribute)},s=function(t){return t instanceof RegExp},d=function(){return"undefined"!=typeof window},f=function(e){if(t(e))return JSON.parse(JSON.stringify(e))},l=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=function(t){return"\n>>> "+String(JSON.stringify(t,function(t,e){return"function"==typeof e?e.toString():e},2)).replace(/\n/g,"\n    ")};if(!t)throw new Error("@okwolo."+e+r.map(i).join(""))};return{deepCopy:f,assert:l,isDefined:t,isNull:e,isArray:n,isFunction:r,isString:o,isNumber:i,isBoolean:u,isObject:a,isNode:c,isRegExp:s,isBrowser:d,makeQueue:function(){var e=[],n=function(){var n=e[0];t(n)&&n()};return{add:function(t){l(r(t),"utils.makeQueue.add : added objects must be a function",t),e.push(t),1===e.length&&n()},done:function(){e.shift(),n()}}},makeBus:function(){var e={},n={},i=function(n,i){l(o(n),"utils.bus : handler type is not a string",n),l(r(i),"utils.bus : handler is not a function",i),t(e[n])||(e[n]=[]),e[n].push(i)},u=function(r){l(a(r),"utils.bus : event is not an object",r);var i=r.name;if(t(i)){if(l(o(i),"utils.bus : event name is not a string",i),t(n[i]))return;n[i]=!0}Object.keys(r).forEach(function(n){t(e[n])&&e[n].forEach(function(t){return t(r[n])})})};return Object.assign(u,{on:i})}}};t.exports=r},function(t,e,n){"use strict";var r=n(2),o=n(0)(),i=o.isArray,u=o.isString,a=o.isObject,c=o.isFunction,s=o.isRegExp,d=function(t){var e=t.replace(/([^\w:])/g,"\\$1").replace(/:(\w+)/g,"([^/]*)");return new RegExp("^"+e+"(:?\\?.*)?$")},f=function(){return{name:"okwolo-lite-router",register:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2];i(t)||(t=[]);var r=(e.match(/:\w+/g)||[]).map(function(t){return t.replace(/^:/g,"")});return t.push({keys:r,pattern:d(e),callback:n}),t},fetch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!i(t))return!1;var r=!1;return t.find(function(t){if(a(t)&&i(t.keys)&&s(t.pattern)&&c(t.callback)){var o=t.pattern.exec(e);if(null!==o)return r=!0,o.shift(),t.keys.forEach(function(t,e){u(t)&&(n[t]=o[e])}),t.callback(n),r}}),r}}};t.exports=r({modules:[n(3),n(4)],blobs:[n(5),f],options:{kit:"lite",browser:!0,modules:{state:!1,history:!1,dom:!0,router:!0}}})},function(t,e,n){"use strict";var r=n(0)(),o=r.isFunction,i=r.isDefined,u=r.assert,a=r.deepCopy,c=r.isBrowser,s=r.makeBus,d=function(t){var e=t.modules,n=t.blobs,r=t.options,d=function(t,d){r.browser&&(i(d)||(u(c(),"app : must be run in a browser environment"),d=window));var f=s(),l=s(),p={emit:f,use:l};e.forEach(function(t){t({emit:f,use:l},d)}),n.forEach(function(t){l(t(d))});var h={},b=h;return f.on("state",function(t){b=t}),p.getState=function(){return u(b!==h,"getState : cannot get state before it has been set"),a(b)},r.modules.dom&&(p.update=function(){f({state:b})},i(t)&&l({target:t})),r.modules.state?(p.act=function(t,e){u("SET_STATE"===t||b!==h,"act : cannot act on state before it has been set"),f({act:{state:b,type:t,params:e}})},l({action:{type:"SET_STATE",target:[],handler:function(t,e){return e}}}),p.setState=function(t){if(o(t))return void p.act("SET_STATE",t(a(b)));p.act("SET_STATE",t)},r.modules.history&&(p.undo=function(){p.act("UNDO")},p.redo=function(){p.act("REDO")})):(u(!r.modules.history,"app : cannot use history blob without the state module",r),p.setState=function(t){if(o(t))return void f({state:t(a(b))});f({state:t})}),r.modules.router?(p.redirect=function(t,e){f({redirect:{path:t,params:e}})},p.show=function(t,e){f({show:{path:t,params:e}})},p.register=function(t,e){if(o(t))return void l({builder:t()});l({route:{path:t,callback:function(t){l({builder:e(t)})}}})}):p.register=function(t){l({builder:t()})},Object.assign(p.register,p)};return c()&&(d.kit=r.kit,d.version="1.3.0",i(window.okwolo)||(window.okwolo=d),window.okwolo[r.kit]=d),d};t.exports=d},function(t,e,n){"use strict";var r=n(0)(),o=r.assert,i=r.isDefined,u=r.isFunction,a=function(t,e){var n=t.emit,r=t.use,a=void 0,c=void 0,s=void 0,d=void 0,f=void 0,l=void 0,p=void 0,h=void 0,b=void 0,m=function(t){var e=h(t);return d&&(e=d(e)),e=s(e),f&&(e=f(e)),e},v=!1,g=!1,y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!v;if(!g){if(!(i(p)&&i(h)&&i(b)))return;g=!0}if(!t)return void(l=c(p,m(b),l));l=a(p,m(b)),v=!0};n.on("state",function(t){o(i(t),"dom.updateState : new state is not defined",t),b=t,y()}),r.on("target",function(t){p=t,y(!0)}),r.on("builder",function(t){o(u(t),"dom.replaceBuilder : builder is not a function",t),h=t,y()}),r.on("draw",function(t){o(u(t),"dom.replaceDraw : new draw is not a function",t),a=t,y(!0)}),r.on("update",function(t){o(u(t),"dom.replaceUpdate : new target updater is not a function",t),c=t,y()}),r.on("build",function(t){o(u(t),"dom.replaceBuild : new build is not a function",t),s=t,y()}),r.on("prebuild",function(t){o(u(t),"dom.replacePrebuild : new prebuild is not a function",t),d=t,y()}),r.on("postbuild",function(t){o(u(t),"dom.replacePostbuild : new postbuild is not a function",t),f=t,y()})};t.exports=a},function(t,e,n){"use strict";var r=n(0)(),o=r.assert,i=r.isString,u=r.isObject,a=r.isFunction,c=r.makeQueue,s=function(t,e){var n=t.emit,r=t.use,s=null!==e.document.origin&&"null"!==e.document.origin,d="",f=void 0,l=void 0,p=void 0,h=!1,b=c(),m=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];o(a(p),"router.fetch : fetch is not a function",p),p.apply(void 0,[f].concat(e))},v=function(t){return t.replace(new RegExp("^"+d),"")||""},g=e.location.pathname;s||(g=""),e.onpopstate=function(){g=v(e.location.pathname),m(g)},n.on("redirect",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.path,r=t.params,a=void 0===r?{}:r;o(i(n),"router.redirect : path is not a string",n),o(u(a),"router.redirect : params is not an object",a),b.add(function(){g=n,s?e.history.pushState({},"",(d+g).replace(/^\/C\:/,"")):console.log("@okwolo/router:: path changed to\n>>> "+g),m(g,a),b.done()})}),n.on("show",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.path,n=t.params,r=void 0===n?{}:n;o(i(e),"router.show : path is not a string",e),o(u(r),"router.show : params is not an object",r),b.add(function(){m(e,r),b.done()})}),r.on("route",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.path,n=t.callback;o(i(e),"router.use.route : path is not a string",e),o(a(n),"router.use.route : callback is not a function",e,n),o(a(l),"route.use.route : register is not a function",l),f=l(f,e,n),h||(h=!!m(g))}),r.on("base",function(t){o(i(t),"router.use.base : base url is not a string",t),d=t,g=v(g),m(g)}),r.on("register",function(t){o(a(t),"router.use.register : register is not a function",l),l=t}),r.on("fetch",function(t){o(a(t),"router.use.fetch : fetch is not a function",p),p=t})};t.exports=s},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(0)(),u=i.assert,a=i.isDefined,c=i.isNull,s=i.isArray,d=i.isString,f=i.isNumber,l=i.isBoolean,p=i.isNode,h=i.isObject,b=i.isFunction,m=i.makeQueue,v=function(t){var e=function e(n){if(a(n.text))return n.DOM=t.document.createTextNode(n.text),n;var r=t.document.createElement(n.tagName);return Object.keys(n.attributes).forEach(function(t){r[t]=n.attributes[t]}),Object.keys(n.children).forEach(function(t){n.children[t]=e(n.children[t]),r.appendChild(n.children[t].DOM)}),n.DOM=r,n},n=function(t,e){return Object.keys(Object.assign({},t,e)).filter(function(n){var r=t[n],o=e[n];return!(r!==Object(r)&&o!==Object(o)&&r===o)})},i=function t(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return n.map(function(e){return d(e)?e:s(e)?t.apply(void 0,r(e)):h(e)?t(Object.keys(e).map(function(t){return e[t]&&t})):void 0}).filter(Boolean).join(" ")};return{name:"@okwolo/dom",draw:function(n,r){return u(p(n),"dom.draw : target is not a DOM node",n),a(r)||(r={text:""}),r=e(r),t.requestAnimationFrame(function(){n.innerHTML="",n.appendChild(r.DOM)}),r},update:function(r,o,i){u(p(r),"dom.update : target is not a DOM node",r);var c=m();t.requestAnimationFrame(function(){c.add(function(){s(i,o,{DOM:r,children:[i]},0),c.done()})});var s=function t(r,o,i,u){if(a(r)||a(o)){if(!a(r))return i.children[u]=e(o),void i.DOM.appendChild(i.children[u].DOM);if(!a(o))return i.DOM.removeChild(r.DOM),void c.add(function(){delete i.children[u],c.done()});if(r.tagName!==o.tagName){var s=r.DOM,d=e(o);return i.DOM.replaceChild(d.DOM,s),void(a(d.text)?(i.children[u].DOM=d.DOM,i.children[u].text=d.text,delete i.children[u].tagName,delete i.children[u].attributes,delete i.children[u].children):(i.children[u].DOM=d.DOM,delete i.children[u].text,i.children[u].tagName=d.tagName,i.children[u].attributes=d.attributes,i.children[u].children=d.children))}if(3===r.DOM.nodeType)r.text!==o.text&&(r.DOM.nodeValue=o.text,r.text=o.text);else{var f=n(r.attributes,o.attributes);0!==f.length&&f.forEach(function(t){r.attributes[t]=o.attributes[t],r.DOM[t]=o.attributes[t]})}var l=Object.keys(r.children||{}).concat(Object.keys(o.children||{})),p={};l.forEach(function(e){void 0===p[e]&&(p[e]=!0,t(r.children[e],o.children[e],r,e))})}};return i},build:function t(e){if(l(e)&&(e=null),c(e))return{text:""};if(f(e)&&(e=String(e)),d(e))return{text:e};if(u(s(e),"dom.build : vdom object is not a recognized type",e),b(e[0])){var n=e[1]||{};u(h(n),"dom.build : component's props is not an object",e,n);var r=e[2]||[];return u(s(r),"dom.build : component's children is not an array",e,r),t(e[0](Object.assign({},n,{children:r})))}var p=e,m=o(p,3),v=m[0],g=m[1],y=m[2];u(d(v),"dom.build : tag property is not a string",e,v);var w=/^ *(\w+) *(?:#([-\w\d]+))? *((?:\.[-\w\d]+)*)? *(?:\|\s*([^\s]{1}[^]*?))? *$/.exec(v);u(s(w),"dom.build : tag property cannot be parsed",v);var O=o(w,5),x=O[1],k=O[2],j=O[3],D=O[4];return null==g&&(g={}),u(h(g),"dom.build : attributes is not an object",e,g),a(k)&&!a(g.id)&&(g.id=k.trim()),(a(g.className)||a(j))&&(g.className=i(g.className,j).replace(/\./g," ").replace(/  +/g," ").trim()),a(D)&&(a(g.style)?(g.style+=";"+D,g.style=g.style.replace(/;;/g,";")):g.style=D),a(y)?u(s(y),"dom.build : children of vdom object is not an array",e,y):y=[],{tagName:x,attributes:g,children:y.map(t)}}}};t.exports=v}]);