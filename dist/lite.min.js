!function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=1)}([function(t,n,e){"use strict";var r=function(){var t=function(t){return void 0!==t},n=function(t){return null===t},e=function(t){return Array.isArray(t)},r=function(t){return"function"==typeof t},o=function(t){return"string"==typeof t},i=function(t){return"number"==typeof t},u=function(t){return"boolean"==typeof t},a=function(t){return!!t&&t.constructor===Object},s=function(t){return!!(t&&t.tagName&&t.nodeName&&t.ownerDocument&&t.removeAttribute)},c=function(t){return t instanceof RegExp},d=function(){return"undefined"!=typeof window},f=function(n){if(t(n))return JSON.parse(JSON.stringify(n))},l=function(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;o<e;o++)r[o-2]=arguments[o];var i=function(t){return"\n>>> "+String(JSON.stringify(t,function(t,n){return"function"==typeof n?n.toString():n},2)).replace(/\n/g,"\n    ")};if(!t)throw new Error("@okwolo."+n+r.map(i).join(""))};return{deepCopy:f,assert:l,isDefined:t,isNull:n,isArray:e,isFunction:r,isString:o,isNumber:i,isBoolean:u,isObject:a,isNode:s,isRegExp:c,isBrowser:d,makeQueue:function(){var n=[],e=function(){var e=n[0];t(e)&&e()};return{add:function(t){l(r(t),"utils.makeQueue.add : added objects must be a function",t),n.push(t),1===n.length&&e()},done:function(){n.shift(),e()}}},makeBus:function(){var n={},e={},i=function(e,i){l(o(e),"utils.bus : handler type is not a string",e),l(r(i),"utils.bus : handler is not a function",i),t(n[e])||(n[e]=[]),n[e].push(i)},u=function(r){l(a(r),"utils.bus : event is not an object",r);var i=r.name;if(t(i)){if(l(o(i),"utils.bus : event name is not a string",i),t(e[i]))return;e[i]=!0}Object.keys(r).forEach(function(e){t(n[e])&&n[e].forEach(function(t){return t(r[e])})})};return Object.assign(u,{on:i})}}};t.exports=r},function(t,n,e){"use strict";var r=e(2),o=function(t){var n=t.replace(/([^\w:])/g,"\\$1").replace(/:(\w+)/g,"([^/]*)");return new RegExp("^"+n+"(:?\\?.*)?$")},i=function(){return{name:"okwolo-lite-router",register:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],e=arguments[2],r=(n.match(/:\w+/g)||[]).map(function(t){return t.replace(/^:/g,"")});return t.push({keys:r,pattern:o(n),handler:e}),t},fetch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!1;return t.find(function(t){var o=t.pattern.exec(n);if(null!==o)return r=!0,o.shift(),t.keys.forEach(function(t,n){e[t]=o[n]}),t.handler(e),r}),r}}};t.exports=r({modules:[e(3),e(4)],blobs:[e(5),i],options:{kit:"lite",browser:!0,modules:{state:!1,history:!1,dom:!0,router:!0}}})},function(t,n,e){"use strict";var r=e(0)(),o=r.isFunction,i=r.isDefined,u=r.assert,a=r.deepCopy,s=r.isBrowser,c=r.makeBus,d=function(t){var n=t.modules,e=t.blobs,r=t.options,d=function(t,d){r.browser&&(i(d)||(u(s(),"app : must be run in a browser environment"),d=window));var f=c(),l=c(),p={emit:f,use:l};n.forEach(function(t){t({emit:f,use:l},d)}),e.forEach(function(t){l(t(d))});var v={},h=v;return f.on("state",function(t){h=t}),p.getState=function(){return u(h!==v,"getState : cannot get state before it has been set"),a(h)},r.modules.dom&&(p.update=function(){f({state:h})},i(t)&&l({target:t})),r.modules.state?(p.act=function(t,n){u(h!==v||"SET_STATE"===t,"act : cannot act on state before it has been set"),f({act:{state:h,type:t,params:n}})},l({action:{type:"SET_STATE",target:[],handler:function(t,n){return n}}}),p.setState=function(t){if(o(t))return void p.act("SET_STATE",t(h));p.act("SET_STATE",t)}):p.setState=function(t){if(o(t))return void f({state:t(a(h))});f({state:t})},r.modules.history&&(u(r.modules.state,"app : cannot use history blob without the state module",r),p.undo=function(){p.act("UNDO")},p.redo=function(){p.act("REDO")}),r.modules.router?(p.redirect=function(t,n){f({redirect:{path:t,params:n}})},p.show=function(t,n){f({show:{path:t,params:n}})},p.register=function(t,n){if(o(t))return void l({builder:t()});l({route:{path:t,handler:function(t){l({builder:n(t)})}}})}):p.register=function(t){l({builder:t()})},Object.assign(p.register,p)};return s()&&(d.kit=r.kit,d.version="1.3.0",i(window.okwolo)||(window.okwolo=d),window.okwolo[r.kit]=d),d};t.exports=d},function(t,n,e){"use strict";var r=e(0)(),o=r.assert,i=r.isDefined,u=r.isFunction,a=function(t,n){var e=t.emit,r=t.use,a=void 0,s=void 0,c=void 0,d=void 0,f=void 0,l=void 0,p=void 0,v=void 0,h=void 0,m=function(t){var n=s(t);return d&&(n=d(n)),n=c(n),f&&(n=f(n)),n},b=!1,g=!1,y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!b;if(!g){if(!(i(a)&&i(s)&&i(h)&&i(c)))return;g=!0}if(!t)return void(v=p(a,m(h),v));v=l(a,m(h)),b=!0};e.on("state",function(t){o(i(t),"dom.updateState : new state is not defined",t),h=t,y()}),r.on("target",function(t){a=t,y(!0)}),r.on("builder",function(t){o(u(t),"dom.replaceBuilder : builder is not a function",t),s=t,y()}),r.on("draw",function(t){o(u(t),"dom.replaceDraw : new draw is not a function",t),l=t,y(!0)}),r.on("update",function(t){o(u(t),"dom.replaceUpdate : new target updater is not a function",t),p=t,y()}),r.on("build",function(t){o(u(t),"dom.replaceBuild : new build is not a function",t),c=t,y()}),r.on("prebuild",function(t){o(u(t),"dom.replacePrebuild : new prebuild is not a function",t),d=t,y()}),r.on("postbuild",function(t){o(u(t),"dom.replacePostbuild : new postbuild is not a function",t),f=t,y()})};t.exports=a},function(t,n,e){"use strict";var r=e(0)(),o=r.assert,i=r.isString,u=r.isObject,a=r.isFunction,s=r.makeQueue,c=function(t,n){var e=t.emit,r=t.use,c=null!==n.document.origin&&"null"!==n.document.origin,d="",f=void 0,l=void 0,p=void 0,v=!1,h=s(),m=function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];o(a(p),"router.fetch : fetch is not a function",p),p.apply(void 0,[f].concat(n))},b=function(t){var n=d.replace(/([^\w])/g,"\\$1");return t.replace(new RegExp("^"+n),"")||""},g=n.location.pathname;c||(g=""),n.onpopstate=function(){g=b(n.location.pathname),m(g)},e.on("redirect",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.path,r=t.params,a=void 0===r?{}:r;o(i(e),"router.redirect : path is not a string",e),o(u(a),"router.redirect : params is not an object",a),h.add(function(){g=e,c?n.history.pushState({},"",(d+g).replace(/^\/C\:/,"")):console.log("@okwolo/router:: path changed to\n>>> "+g),m(g,a),h.done()})}),e.on("show",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.path,e=t.params,r=void 0===e?{}:e;o(i(n),"router.show : path is not a string",n),o(u(r),"router.show : params is not an object",r),h.add(function(){m(n,r),h.done()})}),r.on("route",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.path,e=t.handler;o(i(n),"router.use.route : path is not a string",n),o(a(e),"router.use.route : handler is not a function",n,e),o(a(l),"route.use.route : register is not a function",l),f=l(f,n,e),v||(v=!!m(g))}),r.on("base",function(t){o(i(t),"router.use.base : base url is not a string",t),d=t,g=b(g),m(g)}),r.on("register",function(t){o(a(t),"router.use.register : register is not a function",l),l=t}),r.on("fetch",function(t){o(a(t),"router.use.fetch : fetch is not a function",p),p=t})};t.exports=c},function(t,n,e){"use strict";function r(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var o=function(){function t(t,n){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=e(0)(),u=i.assert,a=i.isDefined,s=i.isNull,c=i.isArray,d=i.isString,f=i.isNumber,l=i.isBoolean,p=i.isNode,v=i.isObject,h=i.isFunction,m=function t(){for(var n=arguments.length,e=Array(n),o=0;o<n;o++)e[o]=arguments[o];return e.map(function(n){return d(n)?n:c(n)?t.apply(void 0,r(n)):v(n)?t(Object.keys(n).map(function(t){return n[t]&&t})):void 0}).filter(Boolean).join(" ")},b=function(t,n){return Object.keys(Object.assign({},t,n)).filter(function(e){var r=t[e],o=n[e];return!(!h(r)&&!h(o))||r!==o})},g=function t(n){if(l(n)&&(n=null),s(n))return{text:""};if(f(n)&&(n=String(n)),d(n))return{text:n};if(u(c(n),"dom.build : vdom object is not a recognized type",n),h(n[0])){var e=n,r=o(e,3),i=r[0],p=r[1],b=void 0===p?{}:p,g=r[2],y=void 0===g?[]:g;return u(v(b),"dom.build : component's props is not an object",n,b),u(c(y),"dom.build : component's children is not an array",n,y),t(i(Object.assign({},b,{children:y})))}var w=n,O=o(w,3),x=O[0],j=O[1],D=void 0===j?{}:j,S=O[2],E=void 0===S?[]:S;u(d(x),"dom.build : tag property is not a string",n,x),u(v(D),"dom.build : attributes is not an object",n,D),u(c(E),"dom.build : children of vdom object is not an array",n,E);var k=/^ *(\w+) *(?:#([-\w\d]+))? *((?:\.[-\w\d]+)*)? *(?:\|\s*([^\s]{1}[^]*?))? *$/.exec(x);u(c(k),"dom.build : tag property cannot be parsed",x);var M=o(k,5),N=M[1],A=M[2],T=M[3],B=M[4];return a(A)&&!a(D.id)&&(D.id=A.trim()),(a(D.className)||a(T))&&(D.className=m(D.className,T).replace(/\./g," ").replace(/  +/g," ").trim()),a(B)&&(a(D.style)?(B=(B+";").replace(/;;$/g,";"),D.style+=B+D.style):D.style=B),{tagName:N,attributes:D,children:E.map(t)}},y=function(t){var n=function n(e){if(a(e.text))return e.DOM=t.document.createTextNode(e.text),e;var r=t.document.createElement(e.tagName);return Object.assign(r,e.attributes),Object.keys(e.children).forEach(function(t){var o=n(e.children[t]),i=o.DOM;r.appendChild(i)}),e.DOM=r,e};return{name:"@okwolo/dom",draw:function(e,r){return u(p(e),"dom.draw : target is not a DOM node",e),n(r),t.requestAnimationFrame(function(){e.innerHTML="",e.appendChild(r.DOM)}),r},update:function(e,r,o){u(p(e),"dom.update : target is not a DOM node",e);var i=function t(e,r,o,i){if(a(e)||a(r)){if(!a(e))return o.children[i]=n(r),void o.DOM.appendChild(o.children[i].DOM);if(!a(r))return o.DOM.removeChild(e.DOM),void delete o.children[i];if(e.tagName!==r.tagName){var u=e.DOM,s=n(r);return o.DOM.replaceChild(s.DOM,u),void Object.assign(e,{DOM:void 0,text:void 0,tagName:void 0,attributes:void 0,children:void 0},s)}if(3===e.DOM.nodeType)return void(e.text!==r.text&&(e.DOM.nodeValue=r.text,e.text=r.text));b(e.attributes,r.attributes).forEach(function(t){e.attributes[t]=r.attributes[t],e.DOM[t]=r.attributes[t]});for(var c=Math.max(e.children.length,r.children.length),d=0;d<c;++d)t(e.children[d],r.children[d],e,d)}};return t.requestAnimationFrame(function(){i(o,r,{DOM:e,children:[o]},0)}),o},build:g}};t.exports=y}]);